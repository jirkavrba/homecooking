{"openapi":"3.1.0","info":{"title":"Homecooking API","contact":{"name":"Jiří Vrba","email":"homecooking@vrba.dev"},"version":"dev"},"servers":[{"url":"http://server.homecooking.vrba.dev","description":"Generated server url"}],"paths":{"/api/v1/user/regenerate-follow-code":{"post":{"tags":["user-controller"],"operationId":"regenerateFollowCode","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}}},"security":[{"user":[]}]}},"/api/v1/user/post/image/upload":{"post":{"tags":["post-controller"],"operationId":"uploadImage","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FileUploadResponse"}}}}},"security":[{"user":[]}]}},"/api/v1/user/post/create":{"post":{"tags":["post-controller"],"operationId":"createPost","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePostRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CreatePostResponse"}}}}},"security":[{"user":[]}]}},"/api/v1/user/follow":{"post":{"tags":["user-controller"],"operationId":"followUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FollowUserRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}}},"security":[{"user":[]}]}},"/api/v1/bot/user/magic-link":{"post":{"tags":["bot-controller"],"operationId":"generateMagicLink","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MagicLinkRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MagicLinkResponse"}}}}},"security":[{"bot":[]}]}},"/api/v1/auth/login/magic-link":{"post":{"tags":["auth-controller"],"operationId":"loginWithMagicLink","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/v1/user/post/my-posts":{"get":{"tags":["post-controller"],"operationId":"listPosts","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostsListingResponse"}}}}},"security":[{"user":[]}]}},"/api/v1/user/post/feed":{"get":{"tags":["post-controller"],"operationId":"feed","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PostsFeedResponse"}}}}},"security":[{"user":[]}]}},"/api/v1/user/me":{"get":{"tags":["user-controller"],"operationId":"getUserInfo","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserInfoResponse"}}}}},"security":[{"user":[]}]}}},"components":{"schemas":{"UserInfoResponse":{"type":"object","properties":{"username":{"type":"string"},"avatar_url":{"type":"string"},"follow_code":{"type":"string"}},"required":["avatar_url","follow_code","username"]},"FileUploadResponse":{"type":"object","properties":{"file_url":{"type":"string"}},"required":["file_url"]},"CreatePostRequest":{"type":"object","properties":{"title":{"type":"string"},"image_url":{"type":"string"},"description":{"type":"string"},"ingredients_list":{"type":"string"},"recipe":{"type":"string"},"rating":{"type":"integer","format":"int32","maximum":5,"minimum":1},"priceCzkPerPortion":{"type":"integer","format":"int32","minimum":0},"kcalPerPortion":{"type":"integer","format":"int32","minimum":0},"preparationTimeMins":{"type":"integer","format":"int32","minimum":0}},"required":["image_url","title"]},"CreatePostResponse":{"type":"object","properties":{"post":{"$ref":"#/components/schemas/MealPostDto"}},"required":["post"]},"MealPostDto":{"type":"object","properties":{"title":{"type":"string"},"image_url":{"type":"string"},"description":{"type":"string"},"ingredients_list":{"type":"string"},"recipe":{"type":"string"},"rating":{"type":"integer","format":"int32"},"price_czk_per_portion":{"type":"integer","format":"int32"},"kcal_per_portion":{"type":"integer","format":"int32"},"preparation_time_minutes":{"type":"integer","format":"int32"},"share_token":{"type":"string"},"posted_at":{"type":"string","format":"date-time"}},"required":["image_url","posted_at","title"]},"FollowUserRequest":{"type":"object","properties":{"follow_code":{"type":"string","minLength":1}},"required":["follow_code"]},"MagicLinkRequest":{"type":"object","properties":{"discord_id":{"type":"string"},"username":{"type":"string"},"avatar":{"type":"string"}},"required":["avatar","discord_id","username"]},"MagicLinkResponse":{"type":"object","properties":{"magic_link":{"type":"string"}},"required":["magic_link"]},"LoginRequest":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]},"LoginResponse":{"type":"object","properties":{"auth_token":{"type":"string"}},"required":["auth_token"]},"PostsListingResponse":{"type":"object","properties":{"posts":{"type":"array","items":{"$ref":"#/components/schemas/MealPostDto"}}},"required":["posts"]},"MealPostWithAuthorDto":{"type":"object","properties":{"post":{"$ref":"#/components/schemas/MealPostDto"},"author":{"$ref":"#/components/schemas/PostAuthorDto"}},"required":["author","post"]},"PostAuthorDto":{"type":"object","properties":{"username":{"type":"string"},"avatar_url":{"type":"string"}},"required":["avatar_url","username"]},"PostsFeedResponse":{"type":"object","properties":{"posts":{"type":"array","items":{"$ref":"#/components/schemas/MealPostWithAuthorDto"}}},"required":["posts"]}},"securitySchemes":{"bot":{"type":"http","scheme":"basic"},"user":{"type":"http","scheme":"bearer"}}}}